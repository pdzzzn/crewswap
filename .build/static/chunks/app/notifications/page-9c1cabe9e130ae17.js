(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[193],{2884:function(e,t,s){Promise.resolve().then(s.bind(s,1502))},1502:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var a=s(5444),r=s(9300),n=s(9827),i=s(2422),c=s(1335),l=s(9046),d=s(6124),o=s(7694),u=s(1471),h=s(4693),x=s(179),m=s(9021),f=s(9047),p=s(5854);function N(){let[e,t]=(0,r.useState)(null),[s,N]=(0,r.useState)([]),[j,y]=(0,r.useState)(!0),g=(0,f.useRouter)(),{toast:b}=(0,p.pm)();(0,r.useEffect)(()=>{E(),v()},[]);let E=async()=>{try{let e=await fetch("/api/auth/me");if(e.ok){let s=await e.json();t(s.user)}else g.push("/login")}catch(e){console.error("Failed to fetch user data:",e),g.push("/login")}},v=async()=>{try{let e=await fetch("/api/notifications");if(e.ok){let t=await e.json();N(t.notifications)}}catch(e){console.error("Failed to fetch notifications:",e)}finally{y(!1)}},w=async e=>{try{(await fetch("/api/notifications/".concat(e,"/read"),{method:"PATCH"})).ok&&N(t=>t.map(t=>t.id===e?{...t,isRead:!0}:t))}catch(e){console.error("Failed to mark notification as read:",e)}},C=e=>{switch(e){case"SWAP_REQUEST_RECEIVED":return(0,a.jsx)(l.Z,{className:"w-5 h-5 text-blue-600"});case"SWAP_REQUEST_APPROVED":return(0,a.jsx)(d.Z,{className:"w-5 h-5 text-green-600"});case"SWAP_REQUEST_DENIED":return(0,a.jsx)(o.Z,{className:"w-5 h-5 text-red-600"});case"SWAP_REQUEST_CANCELLED":return(0,a.jsx)(u.Z,{className:"w-5 h-5 text-orange-600"});default:return(0,a.jsx)(l.Z,{className:"w-5 h-5 text-gray-600"})}},R=e=>{switch(e){case"SWAP_REQUEST_RECEIVED":return(0,a.jsx)(c.C,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-300",children:"New Request"});case"SWAP_REQUEST_APPROVED":return(0,a.jsx)(c.C,{variant:"outline",className:"bg-green-50 text-green-700 border-green-300",children:"Approved"});case"SWAP_REQUEST_DENIED":return(0,a.jsx)(c.C,{variant:"outline",className:"bg-red-50 text-red-700 border-red-300",children:"Denied"});case"SWAP_REQUEST_CANCELLED":return(0,a.jsx)(c.C,{variant:"outline",className:"bg-orange-50 text-orange-700 border-orange-300",children:"Cancelled"});default:return(0,a.jsx)(c.C,{variant:"outline",children:"Notification"})}};if(!e||j)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(l.Z,{className:"w-8 h-8 animate-pulse mx-auto mb-4 text-blue-600"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading notifications..."})]})});let _=s.filter(e=>!e.isRead).length;return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(m.Z,{user:e}),(0,a.jsxs)("main",{className:"container max-w-screen-xl mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Notifications"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Stay updated on your swap requests and activity"}),_>0&&(0,a.jsxs)(c.C,{variant:"destructive",className:"rounded-full",children:[_," unread"]})]})]}),0===s.length?(0,a.jsx)(n.Zb,{children:(0,a.jsxs)(n.aY,{className:"text-center py-12",children:[(0,a.jsx)(l.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No notifications"}),(0,a.jsx)("p",{className:"text-gray-600",children:"You don't have any notifications yet. When you send or receive swap requests, they'll appear here."}),(0,a.jsx)(i.z,{className:"mt-4",onClick:()=>g.push("/dashboard"),children:"Go to Dashboard"})]})}):(0,a.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,a.jsxs)(n.Zb,{className:"hover:shadow-md transition-all cursor-pointer ".concat(e.isRead?"":"border-blue-200 bg-blue-50/30"),onClick:()=>{e.isRead||w(e.id),e.swapRequestId&&g.push("/swap-requests")},children:[(0,a.jsx)(n.Ol,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[C(e.type),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)(n.ll,{className:"text-lg flex items-center gap-2",children:[e.title,!e.isRead&&(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.message})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[R(e.type),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:(0,x.WU)(new Date(e.createdAt),"MMM dd, HH:mm")})]})]})}),e.swapRequestId&&(0,a.jsx)(n.aY,{className:"pt-0",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-blue-600",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Click to view swap request details"})]})})]},e.id))})]})]})}},6124:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(2154).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},7694:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(2154).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},1471:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(2154).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])}},function(e){e.O(0,[251,737,240,983,386,156,744],function(){return e(e.s=2884)}),_N_E=e.O()}]);