(()=>{var e={};e.id=250,e.ids=[250],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8226:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>o,routeModule:()=>p,tree:()=>c}),a(2349),a(2509),a(1363);var t=a(6576),r=a(2007),n=a(1818),i=a.n(n),l=a(8897),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);a.d(s,d);let c=["",{children:["swap-requests",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,2349)),"/home/ubuntu/aviation-crew-swap/app/app/swap-requests/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,2509)),"/home/ubuntu/aviation-crew-swap/app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,1363,23)),"next/dist/client/components/not-found-error"]}],o=["/home/ubuntu/aviation-crew-swap/app/app/swap-requests/page.tsx"],u="/swap-requests/page",x={require:a,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/swap-requests/page",pathname:"/swap-requests",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2884:(e,s,a)=>{Promise.resolve().then(a.bind(a,6515))},6515:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>B});var t=a(2901),r=a(4383),n=a(3803),i=a(7878),l=a(1606),d=a(1940),c=a(9291),o=a(4603),u=a(2490),x=a(4132),p=a(1861),m=a(8106),h=a(430),g="Tabs",[j,v]=(0,c.b)(g,[o.Pc]),y=(0,o.Pc)(),[f,N]=j(g),b=r.forwardRef((e,s)=>{let{__scopeTabs:a,value:r,onValueChange:n,defaultValue:i,orientation:l="horizontal",dir:d,activationMode:c="automatic",...o}=e,u=(0,p.gm)(d),[g,j]=(0,m.T)({prop:r,onChange:n,defaultProp:i});return(0,t.jsx)(f,{scope:a,baseId:(0,h.M)(),value:g,onValueChange:j,orientation:l,dir:u,activationMode:c,children:(0,t.jsx)(x.WV.div,{dir:u,"data-orientation":l,...o,ref:s})})});b.displayName=g;var w="TabsList",q=r.forwardRef((e,s)=>{let{__scopeTabs:a,loop:r=!0,...n}=e,i=N(w,a),l=y(a);return(0,t.jsx)(o.fC,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:r,children:(0,t.jsx)(x.WV.div,{role:"tablist","aria-orientation":i.orientation,...n,ref:s})})});q.displayName=w;var C="TabsTrigger",D=r.forwardRef((e,s)=>{let{__scopeTabs:a,value:r,disabled:n=!1,...i}=e,l=N(C,a),c=y(a),u=R(l.baseId,r),p=P(l.baseId,r),m=r===l.value;return(0,t.jsx)(o.ck,{asChild:!0,...c,focusable:!n,active:m,children:(0,t.jsx)(x.WV.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":p,"data-state":m?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:u,...i,ref:s,onMouseDown:(0,d.M)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(r)}),onKeyDown:(0,d.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(r)}),onFocus:(0,d.M)(e.onFocus,()=>{let e="manual"!==l.activationMode;m||n||!e||l.onValueChange(r)})})})});D.displayName=C;var k="TabsContent",M=r.forwardRef((e,s)=>{let{__scopeTabs:a,value:n,forceMount:i,children:l,...d}=e,c=N(k,a),o=R(c.baseId,n),p=P(c.baseId,n),m=n===c.value,h=r.useRef(m);return r.useEffect(()=>{let e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(u.z,{present:i||m,children:({present:a})=>(0,t.jsx)(x.WV.div,{"data-state":m?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":o,hidden:!a,id:p,tabIndex:0,...d,ref:s,style:{...e.style,animationDuration:h.current?"0s":void 0},children:a&&l})})});function R(e,s){return`${e}-trigger-${s}`}function P(e,s){return`${e}-content-${s}`}M.displayName=k;var A=a(8637);let Z=r.forwardRef(({className:e,...s},a)=>t.jsx(q,{ref:a,className:(0,A.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));Z.displayName=q.displayName;let _=r.forwardRef(({className:e,...s},a)=>t.jsx(D,{ref:a,className:(0,A.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));_.displayName=D.displayName;let z=r.forwardRef(({className:e,...s},a)=>t.jsx(M,{ref:a,className:(0,A.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));z.displayName=M.displayName;var T=a(52),F=a(4128),S=a(510),E=a(1945);let V=(0,E.Z)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),$=(0,E.Z)("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);var I=a(49),Y=a(3094),G=a(1659),L=a(8809),W=a(7221),H=a(7912),O=a(4374),K=a(437);function B(){let[e,s]=(0,r.useState)(null),[a,d]=(0,r.useState)([]),[c,o]=(0,r.useState)([]),[u,x]=(0,r.useState)(""),[p,m]=(0,r.useState)(null),[h,g]=(0,r.useState)(!0),j=(0,O.useRouter)(),{toast:v}=(0,K.pm)(),y=async()=>{try{let e=await fetch("/api/swap-requests");if(e.ok){let s=await e.json();d(s.sentRequests),o(s.receivedRequests)}}catch(e){console.error("Failed to fetch swap requests:",e)}finally{g(!1)}},f=async(e,s)=>{try{let a=await fetch(`/api/swap-requests/${e}/respond`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:s,responseMessage:u})});if(a.ok)v({title:`Request ${"approve"===s?"Approved":"Denied"}`,description:`You have ${"approve"===s?"approved":"denied"} the swap request.`}),y(),m(null),x("");else{let e=await a.json();throw Error(e.error||"Failed to respond to request")}}catch(e){v({title:"Response Failed",description:e instanceof Error?e.message:"Failed to respond to request.",variant:"destructive"})}},N=e=>(0,W.WU)(new Date(e),"HH:mm"),w=e=>(0,W.WU)(new Date(e),"MMM dd, yyyy"),q=e=>{switch(e){case"PENDING":return t.jsx(l.C,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-300",children:"Pending"});case"APPROVED":return t.jsx(l.C,{variant:"outline",className:"bg-green-50 text-green-700 border-green-300",children:"Approved"});case"DENIED":return t.jsx(l.C,{variant:"outline",className:"bg-red-50 text-red-700 border-red-300",children:"Denied"});default:return t.jsx(l.C,{variant:"outline",children:e})}},C=({request:e,type:s})=>(0,t.jsxs)(n.Zb,{className:"hover:shadow-md transition-shadow",children:[t.jsx(n.Ol,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["sent"===s?t.jsx(V,{className:"w-5 h-5 text-blue-600"}):t.jsx($,{className:"w-5 h-5 text-green-600"}),(0,t.jsxs)("div",{children:[t.jsx(n.ll,{className:"text-lg",children:"Swap Request"}),t.jsx("p",{className:"text-sm text-gray-500",children:"sent"===s?`To: ${e.receiver?.name}`:`From: ${e.sender?.name}`})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[q(e.status),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(0,W.WU)(new Date(e.createdAt),"MMM dd, HH:mm")})]})]})}),(0,t.jsxs)(n.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg",children:[t.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"sent"===s?"Your Flight":"Their Flight"}),(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("p",{className:"font-bold text-blue-600",children:e.senderDuty.flightNumber}),t.jsx("p",{className:"text-sm text-gray-600",children:w(e.senderDuty.date)}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx("span",{children:e.senderDuty.departureLocation}),t.jsx(I.Z,{className:"w-3 h-3"}),t.jsx("span",{children:e.senderDuty.arrivalLocation})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[N(e.senderDuty.departureTime)," - ",N(e.senderDuty.arrivalTime)]})]})]}),(0,t.jsxs)("div",{className:"p-3 bg-green-50 rounded-lg",children:[t.jsx("p",{className:"text-sm font-medium text-green-900 mb-2",children:"sent"===s?"Requested Flight":"Your Flight"}),(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("p",{className:"font-bold text-green-600",children:e.targetDuty.flightNumber}),t.jsx("p",{className:"text-sm text-gray-600",children:w(e.targetDuty.date)}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx("span",{children:e.targetDuty.departureLocation}),t.jsx(I.Z,{className:"w-3 h-3"}),t.jsx("span",{children:e.targetDuty.arrivalLocation})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[N(e.targetDuty.departureTime)," - ",N(e.targetDuty.arrivalTime)]})]})]})]}),e.message&&(0,t.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Message:"}),t.jsx("p",{className:"text-sm text-gray-600",children:e.message})]}),e.responseMessage&&(0,t.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Response:"}),t.jsx("p",{className:"text-sm text-gray-600",children:e.responseMessage})]}),"received"===s&&"PENDING"===e.status&&(0,t.jsxs)("div",{className:"flex gap-2 pt-2 border-t",children:[(0,t.jsxs)(S.Vq,{children:[t.jsx(S.hg,{asChild:!0,children:(0,t.jsxs)(i.z,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>m(e),children:[t.jsx(Y.Z,{className:"w-4 h-4 mr-2"}),"Approve"]})}),(0,t.jsxs)(S.cZ,{children:[(0,t.jsxs)(S.fK,{children:[t.jsx(S.$N,{children:"Approve Swap Request"}),t.jsx(S.Be,{children:"You are about to approve this duty swap. This action cannot be undone."})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx(F._,{htmlFor:"response",children:"Response Message (Optional)"}),t.jsx(T.g,{id:"response",value:u,onChange:e=>x(e.target.value),placeholder:"Add a message to your response...",rows:3})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[t.jsx(i.z,{variant:"outline",onClick:()=>{m(null),x("")},children:"Cancel"}),t.jsx(i.z,{className:"bg-green-600 hover:bg-green-700",onClick:()=>f(e.id,"approve"),children:"Approve Swap"})]})]})]})]}),(0,t.jsxs)(S.Vq,{children:[t.jsx(S.hg,{asChild:!0,children:(0,t.jsxs)(i.z,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>m(e),children:[t.jsx(G.Z,{className:"w-4 h-4 mr-2"}),"Deny"]})}),(0,t.jsxs)(S.cZ,{children:[(0,t.jsxs)(S.fK,{children:[t.jsx(S.$N,{children:"Deny Swap Request"}),t.jsx(S.Be,{children:"You are about to deny this duty swap request."})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx(F._,{htmlFor:"response",children:"Response Message (Optional)"}),t.jsx(T.g,{id:"response",value:u,onChange:e=>x(e.target.value),placeholder:"Add a message to explain your decision...",rows:3})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[t.jsx(i.z,{variant:"outline",onClick:()=>{m(null),x("")},children:"Cancel"}),t.jsx(i.z,{variant:"destructive",onClick:()=>f(e.id,"deny"),children:"Deny Request"})]})]})]})]})]})]})]});return!e||h?t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx(L.Z,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),t.jsx("p",{className:"text-gray-600",children:"Loading swap requests..."})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(H.Z,{user:e}),(0,t.jsxs)("main",{className:"container max-w-screen-xl mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Swap Requests"}),t.jsx("p",{className:"text-gray-600",children:"Manage your duty swap requests and responses"})]}),(0,t.jsxs)(b,{defaultValue:"received",className:"space-y-6",children:[(0,t.jsxs)(Z,{className:"grid w-full grid-cols-2",children:[(0,t.jsxs)(_,{value:"received",className:"flex items-center gap-2",children:[t.jsx($,{className:"w-4 h-4"}),"Received (",c.length,")"]}),(0,t.jsxs)(_,{value:"sent",className:"flex items-center gap-2",children:[t.jsx(V,{className:"w-4 h-4"}),"Sent (",a.length,")"]})]}),t.jsx(z,{value:"received",className:"space-y-6",children:0===c.length?t.jsx(n.Zb,{children:(0,t.jsxs)(n.aY,{className:"text-center py-12",children:[t.jsx($,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No received requests"}),t.jsx("p",{className:"text-gray-600",children:"You haven't received any swap requests yet."})]})}):t.jsx("div",{className:"grid gap-6",children:c.map(e=>t.jsx(C,{request:e,type:"received"},e.id))})}),t.jsx(z,{value:"sent",className:"space-y-6",children:0===a.length?t.jsx(n.Zb,{children:(0,t.jsxs)(n.aY,{className:"text-center py-12",children:[t.jsx(V,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No sent requests"}),t.jsx("p",{className:"text-gray-600",children:"You haven't sent any swap requests yet. Go to your dashboard to request swaps."}),t.jsx(i.z,{className:"mt-4",onClick:()=>j.push("/dashboard"),children:"Go to Dashboard"})]})}):t.jsx("div",{className:"grid gap-6",children:a.map(e=>t.jsx(C,{request:e,type:"sent"},e.id))})})]})]})]})}},3094:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(1945).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1659:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(1945).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},2349:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(8895).createProxy)(String.raw`/home/ubuntu/aviation-crew-swap/app/app/swap-requests/page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[372,371,206,450,344,830,884],()=>a(8226));module.exports=t})();